<div class="container">
  <div class="content">
    <h1>{{ 'regform.h1' | translate}}</h1>
    <p style="text-indent: 20px">
      {{'regform.warning' | translate}}
    </p>
    <form class="reg-form" [formGroup]="form" enctype="multipart/form-data">
      <mat-form-field appearance="standard" class="form-control">
        <label class="necessary">{{ 'regform.name' | translate}}</label>
        <input
          matInput
          formControlName="firstName"
          type="text"
          placeholder="{{ 'regform.name' | translate}}"
          maxlength="50"
        >
      </mat-form-field>

      <mat-form-field appearance="standard" class="form-control">
        <label class="necessary">{{ 'regform.surname' | translate}}</label>
        <input
          matInput
          formControlName="lastName"
          type="text"
          placeholder="{{ 'regform.surname' | translate}}"
          maxlength="50"
        >
      </mat-form-field>

      <mat-form-field appearance="standard" class="form-control">
        <label>{{ 'regform.patronymic' | translate}}</label>
        <input
          matInput
          formControlName="middleName"
          type="text"
          placeholder="{{ 'regform.patronymic' | translate}}"
          maxlength="50"
        >
      </mat-form-field>

      <mat-form-field appearance="standard" class="form-control">
        <label class="necessary">Email</label>
        <input
          matInput
          formControlName="email"
          type="email"
          placeholder="{{ 'regform.email' | translate}} Email"
          maxlength="254"
        >
        <mat-error *ngIf="form.get('email')?.hasError('email')">
          {{ 'regform.emailError' | translate}}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="standard" class="form-control">
        <label class="necessary">{{ 'regform.phone' | translate}}</label>
        <input
          matInput
          formControlName="phoneNumber"
          type="tel"
          placeholder="{{ 'regform.phone' | translate}}"
          maxlength="15"
        >
        <mat-error>
          {{ 'regform.phoneError' | translate}}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="standard" class="form-control">
        <label class="necessary">Skype</label>
        <input
          matInput
          formControlName="skype"
          type="text"
          placeholder="Skype"
          maxlength="254"
        >
      </mat-form-field>

      <div class="form-control" style="margin-top: 30px">
        <label class="necessary">{{ 'regform.englishlevel' | translate}}</label>
        <mat-radio-group
          aria-labelledby="radio-group-label"
          class="radio-group"
          formControlName="englishLevel"
        >
          <mat-radio-button
            class="radio-button"
            color="primary"
            *ngFor="let level of getKeys(englishLevel)" [value]="level"
          >
            {{englishLevel[level]}}
          </mat-radio-button>
        </mat-radio-group>
      </div>

      <mat-form-field appearance="standard" class="form-control">
        <label class="necessary">{{ 'regform.country' | translate}}</label>
        <mat-select class="select-group" formControlName="country">
          <mat-option *ngFor="let country of getKeys(countries)" [value]="country">
            {{countries[country]}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="standard" class="form-control">
        <label class="necessary">{{ 'regform.city' | translate}}</label>
        <mat-select class="select-group" formControlName="city">
          <mat-option *ngFor="let city of cities[form.get('country')?.value]" [value]="city">
            {{city}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <form [formGroup]="timeForCallList[0]" class="form-control" style="margin-top: 30px">
        <label>{{ 'regform.comforttime' | translate}}</label>
        <div class="selector-time">
          <mat-form-field appearance="fill" class="selector-time-item">
            <mat-label>{{ 'regform.comforttimeFrom' | translate}}</mat-label>
            <mat-select formControlName="startHour">
              <mat-option
                *ngFor="let time of convenientTimeArray"
                [disabled]="
                  time > timeForCallList[0].controls['startHour'].value - 1
                  && !!timeForCallList[0].controls['endHour'].value
                "
                [value]="time"
              >
                {{time}}:00
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="fill" class="selector-time-item">
            <mat-label>{{ 'regform.comforttimeTo' | translate}}</mat-label>
            <mat-select formControlName="endHour">
              <mat-option
                *ngFor="let time of convenientTimeArray"
                [disabled]="time < timeForCallList[0].controls['startHour'].value + 1"
                [value]="time"
              >
                {{time}}:00
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </form>
      <form action="" [formGroup]="timeForCallList[1]" class="form-control">
        <div class="selector-time">
          <mat-form-field appearance="fill" class="selector-time-item">
            <mat-label>{{ 'regform.comforttimeFrom' | translate}}</mat-label>
            <mat-select formControlName="startHour">
              <mat-option
                *ngFor="let time of convenientTimeArray2"
                [disabled]="
                  time > timeForCallList[1].controls['endHour'].value - 1
                  && !!timeForCallList[1].controls['endHour'].value
                "
                [value]="time"
              >
                {{time}}:00
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="fill" class="selector-time-item">
            <mat-label>{{ 'regform.comforttimeTo' | translate}}</mat-label>
            <mat-select formControlName="endHour">
              <mat-option
                *ngFor="let time of convenientTimeArray2"
                [disabled]="time < timeForCallList[1].controls['startHour'].value + 1"
                [value]="time"
              >
                {{time}}:00
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </form>

      <mat-form-field appearance="standard" class="form-control">
        <label>{{ 'regform.primarySkill' | translate}}</label>
        <input matInput
               type="text"
               formControlName="primarySkill"
               placeholder="{{ 'regform.primarySkill' | translate}}"
               maxlength="50"
        >
      </mat-form-field>

      <mat-form-field appearance="standard" class="form-control">
        <label>{{ 'regform.experience' | translate}}</label>
        <textarea matInput
          cdkTextareaAutosize
          formControlName="experience"
          placeholder="{{ 'regform.experience' | translate}}"
          maxlength="500"
        ></textarea>
      </mat-form-field>

      <mat-form-field appearance="standard" class="form-control">
        <label>{{ 'regform.education' | translate}}</label>
        <textarea matInput
          cdkTextareaAutosize
          formControlName="education"
          placeholder="{{ 'regform.education' | translate}}"
          maxlength="500"
        ></textarea>
      </mat-form-field>

      <div class="form-control" style="margin-top: 25px">
        <label>{{ 'regform.resume' | translate}}</label>
      </div>
      <div class="input-wrapper">
        <button
          id="select-file-button"
          mat-flat-button
          color="primary"
        >{{ 'regform.chooseFile' | translate}}</button>
        <input
          id="select-file-input"
          type="file"
          (change)="addFile($event)"
        >
      </div>
      <label>{{file?.name}}</label>
      <mat-error *ngIf="fileSize">
        Файл имеет размер больше {{maxSizeFile/1000}} кБайт
      </mat-error>
      <mat-error *ngIf="isNotSupportFormat">
        Файл имеет не подходящий формат
      </mat-error>

      <mat-checkbox
        style="margin-top: 20px"
        color="primary"
        formControlName="isConfirm"
      >
        {{ 'regform.agree' | translate}}
      </mat-checkbox>
      <button id="submit-button"
        mat-flat-button
        color="primary"
        (click)="openDialog()"
        [disabled]="!(form.valid && form.get('isConfirm')?.value && !isNotSupportFormat && !fileSize)"
      >
        {{ 'regform.submit' | translate}}
      </button>
    </form>
  </div>
</div>
